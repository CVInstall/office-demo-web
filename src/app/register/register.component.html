<div class="register_wrapper">
  <form
    nz-form
    [formGroup]="validateForm"
    (ngSubmit)="submitForm(validateForm.value)"
  >
    <nz-form-item>
      <nz-form-label [nzSpan]="7" nzRequired>用户名</nz-form-label>
      <nz-form-control
        [nzSpan]="12"
        nzHasFeedback
        nzValidatingTip="Validating..."
        [nzErrorTip]="userErrorTpl"
      >
        <input
          nz-input
          formControlName="userName"
          placeholder="async validate try to write JasonWood"
        />
        <ng-template #userErrorTpl let-control>
          <ng-container *ngIf="control.hasError('required')">
            请输入用户名
          </ng-container>
          <ng-container *ngIf="control.hasError('duplicated')">
            此用户名已存在
          </ng-container>
        </ng-template>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="7" nzRequired>邮箱地址</nz-form-label>
      <nz-form-control [nzSpan]="12" nzHasFeedback [nzErrorTip]="emailErrorTpl">
        <input
          nz-input
          formControlName="email"
          placeholder="email"
          type="email"
        />
        <ng-template #emailErrorTpl let-control>
          <ng-container *ngIf="control.hasError('email')">
            不符合邮箱格式
          </ng-container>
          <ng-container *ngIf="control.hasError('required')">
            请输入邮箱地址
          </ng-container>
        </ng-template>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="7" nzRequired>密码</nz-form-label>
      <div>
        <nz-form-control
          [nzSpan]="12"
          nzHasFeedback
          nzErrorTip="Please input your password!"
        >
          <input
            nz-input
            type="password"
            formControlName="password"
            (ngModelChange)="validateConfirmPassword()"
          />
        </nz-form-control>
      </div>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="7" nzRequired>密码确认</nz-form-label>
      <nz-form-control
        [nzSpan]="12"
        nzHasFeedback
        [nzErrorTip]="passwordErrorTpl"
      >
        <input
          nz-input
          type="password"
          formControlName="confirm"
          placeholder="confirm your password"
        />
        <ng-template #passwordErrorTpl let-control>
          <ng-container *ngIf="control.hasError('required')">
            请输入登录需要的密码
          </ng-container>
          <ng-container *ngIf="control.hasError('confirm')">
            前后密码不一致
          </ng-container>
        </ng-template>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="7">备注</nz-form-label>
      <nz-form-control [nzSpan]="12" nzErrorTip="Please write something here!">
        <textarea
          formControlName="comment"
          nz-input
          rows="2"
          placeholder="write any thing"
        ></textarea>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-control [nzOffset]="7" [nzSpan]="12">
        <button nz-button nzType="primary" [disabled]="!validateForm.valid">
          提交
        </button>
        <button nz-button (click)="resetForm($event)">重置</button>
      </nz-form-control>
    </nz-form-item>
  </form>
</div>
